# Defines the Task type and its related API operations for project checklists.


enum TaskStatus {
  PENDING
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

type Task {
  id: ID!
  title: String!
  description: String
  status: TaskStatus!   
  isCompleted: Boolean!      # Keep your existing field
  dueDate: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  businessId: ID!            # üî• REQUIRED by Prisma
  projectId: ID!             # Prisma relation field
  assignedToId: ID           # Prisma relation field (may be null)

  # Relationships
  project: Project!
  assignedTo: User
}

# --- Input Types ---

input CreateTaskInput {
  title: String!
  projectId: ID!
  description: String
  assignedToId: ID
  dueDate: DateTime
  # ‚ùå DO NOT ADD businessId ‚Äî added at service layer.
}

input UpdateTaskInput {
  title: String
  description: String
  isCompleted: Boolean
  assignedToId: ID
  dueDate: DateTime
}

# --- API Operations ---

extend type Query {
  # ‚ùå Remove projectId filter ‚Äî service now filters by business only
  tasks: [Task!]!            
  task(id: ID!): Task
}

extend type Mutation {
  createTask(input: CreateTaskInput!): Task!
  updateTask(id: ID!, input: UpdateTaskInput!): Task!
  deleteTask(id: ID!): Task!
}
