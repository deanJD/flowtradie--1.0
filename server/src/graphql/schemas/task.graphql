# Defines the Task type and its related API operations for project checklists.

type Task {
  id: ID!
  title: String!
  description: String
  isCompleted: Boolean!      # Keep your existing field
  dueDate: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  businessId: ID!            # ðŸ”¥ REQUIRED by Prisma
  projectId: ID!             # Prisma relation field
  assignedToId: ID           # Prisma relation field (may be null)

  # Relationships
  project: Project!
  assignedTo: User
}

# --- Input Types ---

input CreateTaskInput {
  businessId: ID!  # <-- ADD THIS
  title: String!
  projectId: ID!
  description: String
  assignedToId: ID
  dueDate: DateTime
  # âŒ DO NOT ADD businessId â€” added at service layer.
}

input UpdateTaskInput {
  title: String
  description: String
  isCompleted: Boolean
  assignedToId: ID
  dueDate: DateTime
}

# --- API Operations ---

extend type Query {
  # âŒ Remove projectId filter â€” service now filters by business only
  tasks: [Task!]!            
  task(id: ID!): Task
}

extend type Mutation {
  createTask(input: CreateTaskInput!): Task!
  updateTask(id: ID!, input: UpdateTaskInput!): Task!
  deleteTask(id: ID!): Task!
}
