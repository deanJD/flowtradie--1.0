# Defines the Job type and its related API operations.

type Job {
  id: ID!
  title: String!
  description: String
  location: String
  status: JobStatus!
  startDate: DateTime
  endDate: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!

  # --- Relationships ---
  customer: Customer!
  manager: User
  quotes: [Quote!]!        # <-- Changed
  invoices: [Invoice!]!    # <-- Changed
  tasks: [Task!]!          # <-- Changed
  expenses: [JobExpense!]! # <-- Changed
  timeLogs: [TimeLog!]!    # <-- Changed
}

# --- Input Types ---
# These define the shape of data for creating and updating jobs.
# (No changes were needed here)
input CreateJobInput {
  title: String!
  customerId: ID!
  managerId: ID
  description: String
  location: String
  status: JobStatus
  startDate: DateTime
  endDate: DateTime
}

input UpdateJobInput {
  title: String
  managerId: ID
  description: String
  location: String
  status: JobStatus
  startDate: DateTime
  endDate: DateTime
}

# --- API Operations ---
extend type Query {
  # Get all jobs, optionally filtered by customer
  jobs(customerId: ID): [Job!]! # <-- Changed
  # Get a single job by its ID
  job(id: ID!): Job
}

extend type Mutation {
  # (No changes were needed here)
  createJob(input: CreateJobInput!): Job!
  updateJob(id: ID!, input: UpdateJobInput!): Job!
  deleteJob(id: ID!): Job!
}