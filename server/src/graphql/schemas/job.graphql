# Defines the Project type and its related API operations.

type Project {
  id: ID!
  title: String!
  description: String
  location: String
  status: ProjectStatus!
  startDate: DateTime
  endDate: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  budgetedAmount: Float 
  
  # --- Relationships ---
  client: Client!
  manager: User
  quotes: [Quote!]!        # <-- Changed
  invoices: [Invoice!]!    # <-- Changed
  tasks: [Task!]!          # <-- Changed
  expenses: [ProjectExpense!]! # <-- Changed
  timeLogs: [TimeLog!]!    # <-- Changed
}

# --- Input Types ---
# These define the shape of data for creating and updating projects.
# (No changes were needed here)
input CreateProjectInput {
  title: String!
  clientId: ID!
  managerId: ID
  description: String
  location: String
  status: ProjectStatus
  startDate: DateTime
  endDate: DateTime
  
}

input UpdateProjectInput {
  title: String
  managerId: ID
  description: String
  location: String
  status: ProjectStatus
  startDate: DateTime
  endDate: DateTime
  budgetedAmount: Float
}

# --- API Operations ---
extend type Query {
  # Get all projects, optionally filtered by client
  projects(clientId: ID): [Project!]! # <-- Changed
  # Get a single project by its ID
  project(id: ID!): Project
}

extend type Mutation {
  # (No changes were needed here)
  createProject(input: CreateProjectInput!): Project!
  updateProject(id: ID!, input: UpdateProjectInput!): Project!
  deleteProject(id: ID!): Project!
}