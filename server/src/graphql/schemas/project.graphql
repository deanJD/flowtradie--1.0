type Project {
  id: ID!
  title: String!
  businessId: ID!
  description: String
  status: ProjectStatus!
  startDate: DateTime
  endDate: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  deletedAt: DateTime
  budgetedAmount: Float

  # --- Relationships ---
  client: Client!
  manager: User
  quotes: [Quote!]!
  invoices: [Invoice!]!
  tasks: [Task!]!
  expenses: [ProjectExpense!]!
  timeLogs: [TimeLog!]!

  # --- Address ---
  siteAddress: Address

  # --- ðŸ’° Reporting Fields (Computed) ---
  financialSummary: ProjectFinancialSummary!
  isOverdue: Boolean!
  progress: Float!
  totalHoursWorked: Float!
}

# ðŸ’° Project Reporting Model
type ProjectFinancialSummary {
  invoicesTotal: Float!
  paymentsTotal: Float!
  expensesTotal: Float!
  hoursWorked: Float!
  estimatedProfit: Float!
}

input ProjectSiteAddressInput {
  line1: String!
  line2: String
  city: String!
  state: String
  postcode: String!
  country: String
  countryCode: String
}

input CreateProjectInput {
  title: String!
  clientId: ID!
  managerId: ID
  description: String
  status: ProjectStatus
  startDate: DateTime
  endDate: DateTime
  siteAddress: ProjectSiteAddressInput
}

input UpdateProjectInput {
  title: String
  managerId: ID
  description: String
  status: ProjectStatus
  startDate: DateTime
  endDate: DateTime
  budgetedAmount: Float
  siteAddress: ProjectSiteAddressInput
}

extend type Query {
  projects: [Project!]!
  project(id: ID!): Project
  projectReport(id: ID!): ProjectFinancialSummary!
}

extend type Mutation {
  createProject(input: CreateProjectInput!): Project!
  updateProject(id: ID!, input: UpdateProjectInput!): Project!
  deleteProject(id: ID!): Project!
}
