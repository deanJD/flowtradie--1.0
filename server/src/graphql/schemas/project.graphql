# Defines the Project type and its related API operations.

type Project {
  id: ID!
  title: String!
  businessId: ID!           # ✅ KEEP THIS
  description: String
  location: String
  status: ProjectStatus!
  startDate: DateTime
  endDate: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  deletedAt: DateTime
  budgetedAmount: Float

  # --- Relationships ---
  client: Client!
  manager: User
  quotes: [Quote!]!
  invoices: [Invoice!]!
  tasks: [Task!]!
  expenses: [ProjectExpense!]!
  timeLogs: [TimeLog!]!
}

# --- Input Types ---
input CreateProjectInput {
  title: String!
  clientId: ID!
  managerId: ID
  description: String
  location: String
  status: ProjectStatus
  startDate: DateTime
  endDate: DateTime
}

input UpdateProjectInput {
  title: String
  managerId: ID
  description: String
  location: String
  status: ProjectStatus
  startDate: DateTime
  endDate: DateTime
  budgetedAmount: Float
}

extend type Query {
  projects: [Project!]!      # NO ARGS — filter by business in service layer
  project(id: ID!): Project
}

extend type Mutation {
  createProject(input: CreateProjectInput!): Project!
  updateProject(id: ID!, input: UpdateProjectInput!): Project!
  deleteProject(id: ID!): Project!
}
