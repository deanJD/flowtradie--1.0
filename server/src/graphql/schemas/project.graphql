# Defines the Project type and its related API operations.

type Project {
  id: ID!
  title: String!
  businessId: ID!
  description: String
  location: String
  status: ProjectStatus!
  startDate: DateTime
  endDate: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  deletedAt: DateTime
  budgetedAmount: Float

  # --- Relationships ---
  client: Client!
  manager: User
  quotes: [Quote!]!
  invoices: [Invoice!]!
  tasks: [Task!]!
  expenses: [ProjectExpense!]!
  timeLogs: [TimeLog!]!

  # --- üí∞ Reporting Fields (Computed) ---
  financialSummary: ProjectFinancialSummary!  # ‚Üê NEW
  isOverdue: Boolean!                         # ‚Üê NEW
  progress: Float!                            # ‚Üê NEW
  totalHoursWorked: Float!                    # ‚Üê NEW
}

# üí∞ Project Reporting Model ‚Äî NEW
type ProjectFinancialSummary {
  invoicesTotal: Float!
  paymentsTotal: Float!
  expensesTotal: Float!
  hoursWorked: Float!
  estimatedProfit: Float!
}

# --- Input Types ---
input CreateProjectInput {
  title: String!
  clientId: ID!
  managerId: ID
  description: String
  location: String
  status: ProjectStatus
  startDate: DateTime
  endDate: DateTime
}

input UpdateProjectInput {
  title: String
  managerId: ID
  description: String
  location: String
  status: ProjectStatus
  startDate: DateTime
  endDate: DateTime
  budgetedAmount: Float
}

extend type Query {
  projects(businessId: ID!): [Project!]!
  project(id: ID!): Project
  projectReport(id: ID!): ProjectFinancialSummary!
}

  

# --- Mutations ---
extend type Mutation {
  createProject(input: CreateProjectInput!): Project!
  updateProject(id: ID!, input: UpdateProjectInput!): Project!
  deleteProject(id: ID!): Project!
}
