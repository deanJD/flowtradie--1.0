# ======================================
#  REGION TYPE  (OK TO KEEP)
# ======================================
type Region {
  id: ID!
  code: String!         # AU, US, UK, etc.
  name: String!
  currencyCode: String!
  currencySymbol: String
  taxLabel: String
  defaultTaxRate: Float
}

# ======================================
#  BUSINESS TYPE â€” Address is RELATION ONLY ðŸ§ 
# ======================================
type Business {
  id: ID!
  name: String!
  legalName: String
  businessNumber: String
  businessType: String
  email: String!
  phone: String
  website: String
  logoUrl: String

  regionId: ID!
  region: Region!

  # ðŸ‘‡ Comes from `/common/address.graphql`
  address: Address

  createdAt: DateTime!
  updatedAt: DateTime!
  deletedAt: DateTime
}

# ======================================
#  INPUTS â€” Address INCLUDED ONLY AS FLAT FIELDS
# ======================================
input CreateBusinessInput {
  name: String!
  legalName: String
 businessNumber: String 
  businessType: String
  email: String!
  phone: String
  website: String
  logoUrl: String

  regionId: ID!

  # ðŸ‘‡ Flat input used to CREATE Address
  line1: String!
  line2: String
  city: String!
  state: String
  postcode: String!
  country: String
}

input UpdateBusinessInput {
  name: String
  legalName: String
  businessNumber: String 
  businessType: String
  email: String
  phone: String
  website: String
  logoUrl: String

  # ðŸ§  Address update is optional
  line1: String
  line2: String
  city: String
  state: String
  postcode: String
  country: String
}

# ======================================
#  OPERATIONS
# ======================================
extend type Query {
  business(id: ID!): Business
  businesses: [Business!]!
}

extend type Mutation {
  createBusiness(input: CreateBusinessInput!): Business!
  updateBusiness(id: ID!, input: UpdateBusinessInput!): Business!
}
