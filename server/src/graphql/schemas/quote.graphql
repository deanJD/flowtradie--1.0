# --- QUOTE TYPES ---

type Quote {
  id: ID!
  quoteNumber: String!
  status: QuoteStatus!
  issueDate: DateTime!
  expiryDate: DateTime
  subtotal: Float!
  gstRate: Float!
  gstAmount: Float!
  totalAmount: Float!
  createdAt: DateTime!
  updatedAt: DateTime!
  job: Job!
  items: [QuoteItem!]!
}

type QuoteItem {
  id: ID!
  description: String!
  quantity: Int!
  unitPrice: Float!
  total: Float!
  quote: Quote!
}

# --- QUOTE ENUMS ---
enum QuoteStatus {
  DRAFT
  SENT
  ACCEPTED
  REJECTED
}

# --- QUOTE INPUTS ---
input CreateQuoteItemInput {
  description: String!
  quantity: Int = 1
  unitPrice: Float!
}

input CreateQuoteInput {
  jobId: ID!
  quoteNumber: String!
  expiryDate: DateTime
  status: QuoteStatus = DRAFT
  items: [CreateQuoteItemInput!]!
  gstRate: Float = 0.1
}

input UpdateQuoteInput {
  quoteNumber: String
  expiryDate: DateTime
  status: QuoteStatus
  items: [CreateQuoteItemInput!]
  gstRate: Float
}

# --- QUOTE QUERIES & MUTATIONS ---
extend type Query {
  quotesByJob(jobId: ID!): [Quote!]!
  quote(id: ID!): Quote
}

extend type Mutation {
  createQuote(input: CreateQuoteInput!): Quote!
  updateQuote(id: ID!, input: UpdateQuoteInput!): Quote!
  deleteQuote(id: ID!): Quote!
}
